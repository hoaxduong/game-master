---
import Layout from "@/layouts/main.astro";
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Book, Play, Settings, Users, Github } from "lucide-react";
import { getLangFromUrl, useTranslations } from "@/i18n/utils";

import { LanguageSwitcher } from "@/components/LanguageSwitcher";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const currentPath = Astro.url.pathname.replace(new RegExp(`^/${lang}`), "") || "/";

const werewolfPath = `/${lang}/werewolf`;
const rolesPath = `/${lang}/werewolf/roles`;
---

<Layout title={t("app.title") + " - " + t("app.subtitle")}>
  <main
    class="relative min-h-[calc(100vh-64px)] flex flex-col items-center justify-center p-4 sm:p-6 bg-background overflow-hidden"
  >
    <div class="absolute top-4 right-4 z-50">
      <LanguageSwitcher client:load currentLang={lang} currentPath={currentPath} />
    </div>
    <!-- Background Decor -->
    <div
      class="absolute top-0 left-1/2 -translate-x-1/2 w-full max-w-7xl aspect-square bg-[radial-gradient(circle_at_center,oklch(0.55_0.25_264/0.2),transparent_75%)] -z-10 opacity-70"
    >
    </div>
    <div
      class="absolute bottom-0 right-0 w-96 h-96 bg-primary/5 rounded-full blur-[128px] -z-10"
    >
    </div>
    <div
      class="absolute top-1/4 left-0 w-72 h-72 bg-accent/5 rounded-full blur-[96px] -z-10"
    >
    </div>

    <div class="max-w-4xl w-full flex flex-col gap-12 sm:gap-20 py-12">
      <div class="text-center space-y-6 px-4">
        <h1
          class="text-6xl sm:text-8xl md:text-9xl font-black tracking-tighter bg-linear-to-b from-foreground via-foreground/90 to-primary/60 bg-clip-text text-transparent italic underline decoration-primary/40 decoration-12 underline-offset-12"
        >
          {t("app.title")}
        </h1>
        <p
          class="text-base sm:text-lg md:text-xl text-muted-foreground font-semibold uppercase tracking-[0.4em] translate-y-[-8px]"
        >
          {t("app.subtitle")}
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 sm:gap-8 px-4">
        <a href={werewolfPath} class="group relative">
          <div
            class="absolute -inset-0.5 bg-linear-to-r from-primary to-accent rounded-[2rem] blur opacity-0 group-hover:opacity-20 transition duration-500"
          >
          </div>
          <Card
            className="relative h-full border-2 border-primary/10 transition-all duration-500 group-hover:border-primary/50 group-hover:shadow-[0_0_40px_-10px_rgba(var(--primary),0.3)] active:scale-[0.98] overflow-hidden bg-white/3 backdrop-blur-xl"
          >
            <CardContent className="p-8 sm:p-10 flex flex-col gap-6 sm:gap-8">
              <div
                class="w-16 h-16 sm:w-20 sm:h-20 rounded-2xl sm:rounded-3xl bg-primary/10 flex items-center justify-center group-hover:bg-primary group-hover:text-primary-foreground transition-all duration-500 shadow-inner group-hover:shadow-[0_0_30px_rgba(var(--primary),0.5)]"
              >
                <Play className="w-8 h-8 sm:w-10 sm:h-10 fill-current" />
              </div>
              <div>
                <h2 class="text-3xl sm:text-4xl font-bold mb-3 tracking-tight">
                  Werewolf
                </h2>
                <p
                  class="text-muted-foreground text-lg sm:text-xl leading-relaxed font-medium"
                >
                  {t("setup.subtitle")}
                </p>
              </div>
              <div class="mt-2 flex gap-3">
                <span
                  class="px-4 py-1.5 bg-accent/10 text-accent-foreground text-[10px] sm:text-xs font-black rounded-full uppercase tracking-widest border border-accent/20"
                  >{t("common.ready")}</span
                >
                <span
                  class="px-4 py-1.5 bg-primary/10 text-primary text-[10px] sm:text-xs font-black rounded-full uppercase tracking-widest border border-primary/20"
                  >{t("common.premium")}</span
                >
              </div>
            </CardContent>
          </Card>
        </a>

        <Card
          className="opacity-40 border-dashed border-2 border-muted-foreground/20 bg-muted/5 filter grayscale-[0.5] transition-all duration-500 hover:grayscale-0 hover:bg-muted/10"
        >
          <CardContent className="p-8 sm:p-10 flex flex-col gap-6 sm:gap-8">
            <div
              class="w-16 h-16 sm:w-20 sm:h-20 rounded-2xl sm:rounded-3xl bg-muted/20 flex items-center justify-center"
            >
              <Settings
                className="w-8 h-8 sm:w-10 sm:h-10 text-muted-foreground"
              />
            </div>
            <div>
              <h2
                class="text-3xl sm:text-4xl font-bold mb-3 tracking-tight text-muted-foreground"
              >
                {t("common.comingSoon")}
              </h2>
              <p
                class="text-muted-foreground/80 text-lg sm:text-xl font-medium"
              >
                Mafia, Avalon, and Coup modules calling soon.
              </p>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>

    <footer class="mt-12 text-center space-y-4">
      <p class="text-muted-foreground/60 text-sm">
        {t("footer.copyright")}
      </p>

      <a
        href="https://github.com/hoaxduong/game-master"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-muted/50 hover:bg-muted text-muted-foreground hover:text-foreground transition-all duration-300 text-sm font-medium border border-border/50 hover:border-border"
      >
        <Github className="w-4 h-4" />
        <span>{t("footer.opensource")}</span>
      </a>
    </footer>
  </main>
</Layout>

<style>
  h1 {
    font-family: "Outfit", sans-serif;
  }
</style>
